<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Acci√≥n para mostrar informaci√≥n de men√∫s (temporal para debug) -->
        <record id="action_menu_debug" model="ir.actions.server">
            <field name="name">üîç Ver Men√∫s de Inventario (Debug)</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="state">code</field>
            <field name="code">
# Obtener informaci√≥n de todos los men√∫s hijos de Inventario
stock_root = env.ref('stock.menu_stock_root', raise_if_not_found=False)
if not stock_root:
    raise Exception('No se encontr√≥ el men√∫ ra√≠z de Inventario')

all_menus = env['ir.ui.menu'].search([
    ('parent_id', '=', stock_root.id)
], order='sequence')

# Construir mensaje
message_lines = ['=== MEN√öS HIJOS DE INVENTARIO ===\n\n']

for m in all_menus:
    # Obtener ID externo
    external_id = env['ir.model.data'].search([
        ('model', '=', 'ir.ui.menu'),
        ('res_id', '=', m.id)
    ], limit=1)
    external_id_str = external_id.complete_name if external_id else 'Sin ID externo'
    
    # Obtener informaci√≥n de la acci√≥n
    action_info = 'Sin acci√≥n'
    if m.action:
        try:
            action_str = str(m.action)
            if ',' in action_str:
                parts = action_str.split(',')
                action_model = parts[0]
                action_res_id = int(parts[1])
                action_obj = env[action_model].browse(action_res_id)
                action_name = action_obj.name if hasattr(action_obj, 'name') and action_obj.name else str(action_obj)
                action_info = action_model + ': ' + action_name
            else:
                action_info = action_str
        except:
            action_info = str(m.action)
    
    active_str = 'S√≠' if m.active else 'No'
    menu_info = 'üìã ' + m.name + '\n'
    menu_info += '   ‚Ä¢ ID: ' + str(m.id) + '\n'
    menu_info += '   ‚Ä¢ Secuencia: ' + str(m.sequence) + '\n'
    menu_info += '   ‚Ä¢ ID Externo: ' + external_id_str + '\n'
    menu_info += '   ‚Ä¢ Acci√≥n: ' + action_info + '\n'
    menu_info += '   ‚Ä¢ Activo: ' + active_str + '\n\n'
    
    message_lines.append(menu_info)

message = ''.join(message_lines)

# Mostrar en notificaci√≥n (limitamos el tama√±o)
if len(message) > 2000:
    message = message[:2000] + '\n\n... (mensaje truncado, revisa logs para ver completo)'

# Mostrar en notificaci√≥n
action = {
    'type': 'ir.actions.client',
    'tag': 'display_notification',
    'params': {
        'title': 'Informaci√≥n de Men√∫s de Inventario',
        'message': message,
        'type': 'info',
        'sticky': True,
    }
}
            </field>
        </record>
        
        <!-- Men√∫ temporal para debug -->
        <menuitem id="menu_inventory_debug_menus"
                  name="üîç Debug Men√∫s (Temporal)"
                  parent="stock.menu_stock_root"
                  action="action_menu_debug"
                  sequence="99"/>
    </data>
</odoo>

