<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- Vista heredada de res.partner para agregar productos relacionados -->
  <record id="res_partner_form_view_inherit_supplies" model="ir.ui.view">
    <field name="name">res.partner.form.supplies.inherit</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
      
      <!-- Agregar página para productos/seriales relacionados -->
      <xpath expr="//notebook" position="inside">
        <page string="Productos Relacionados" name="related_products">
          <group>
            <group>
              <field name="related_lot_count" string="Seriales Principales"/>
              <field name="total_lot_count" string="Total (Incluyendo Componentes)"/>
            </group>
          </group>
          
          <group>
            <button 
                name="action_view_related_lots" 
                string="Ver Todos los Seriales Relacionados" 
                type="object" 
                class="btn-primary"
                invisible="not total_lot_count"/>
            <button 
                name="%(product_suppiles_partner.action_partner_supplies_report_wizard)d"
                string="Generar Reporte" 
                type="action" 
                class="btn-secondary"
                invisible="not total_lot_count"
                context="{'default_partner_id': id}"/>
          </group>
          
          <div class="alert alert-info" role="alert">
            <p><strong>Nota:</strong> Al asignar un contacto a un serial principal, automáticamente se asignará a todos sus componentes, periféricos y complementos relacionados.</p>
          </div>
        </page>
      </xpath>
      
    </field>
  </record>

</odoo>

