<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- ============================================ -->
        <!-- ROLES ADMINISTRATIVOS -->
        <!-- ============================================ -->
        
        <!-- Rol: Administrador del Sistema -->
        <record id="role_system_administrator" model="permission.role">
            <field name="name">Administrador del Sistema</field>
            <field name="description">Acceso completo a todos los módulos del sistema. Incluye administración, inventario, compras, ventas, CRM, licencias, mesa de ayuda y calculadora de costos.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_system')), (4, ref('base.group_user')), (4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('product.group_product_manager'))]"/>
            <field name="excluded_group_ids" eval="[]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE INVENTARIO -->
        <!-- ============================================ -->
        
        <!-- Rol: Administrador de Inventario -->
        <record id="role_inventory_manager" model="permission.role">
            <field name="name">Administrador de Inventario</field>
            <field name="description">Gestión completa de inventario, productos, productos compuestos, componentes, periféricos, complementos, movimientos de stock, ubicaciones y dashboard de inventario. Acceso a inventory_dashboard_simple y product_suppiles.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_manager')), (4, ref('stock.group_stock_user')), (4, ref('product.group_product_manager')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Usuario de Inventario -->
        <record id="role_inventory_user" model="permission.role">
            <field name="name">Usuario de Inventario</field>
            <field name="description">Consulta de inventario, productos y movimientos. Puede ver pero no modificar productos ni realizar movimientos de stock. Acceso de solo lectura a inventory_dashboard_simple.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_user')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('product.group_product_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE COMPRAS -->
        <!-- ============================================ -->
        
        <!-- Rol: Administrador de Compras -->
        <record id="role_purchase_manager" model="permission.role">
            <field name="name">Administrador de Compras</field>
            <field name="description">Gestión completa de compras: crear y aprobar órdenes de compra, gestionar proveedores, recibir productos y gestionar alertas de compra desde CRM.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('purchase.group_purchase_manager')), (4, ref('purchase.group_purchase_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Usuario de Compras -->
        <record id="role_purchase_user" model="permission.role">
            <field name="name">Usuario de Compras</field>
            <field name="description">Consulta de órdenes de compra, proveedores y productos. Puede crear órdenes de compra pero no aprobarlas. Acceso limitado a compras.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('purchase.group_purchase_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('purchase.group_purchase_manager')), (4, ref('stock.group_stock_manager')), (4, ref('sales_team.group_sale_manager'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE VENTAS Y CRM -->
        <!-- ============================================ -->
        
        <!-- Rol: Administrador de Ventas y CRM -->
        <record id="role_sales_crm_manager" model="permission.role">
            <field name="name">Administrador de Ventas y CRM</field>
            <field name="description">Gestión completa de ventas, CRM, oportunidades, cotizaciones, órdenes de venta, contratos de leasing, alertas de compra desde CRM y gestión de inventario de clientes.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('sales_team.group_sale_manager')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Usuario de Ventas -->
        <record id="role_sales_user" model="permission.role">
            <field name="name">Usuario de Ventas</field>
            <field name="description">Consulta y creación de oportunidades, cotizaciones y órdenes de venta. Acceso limitado a CRM y ventas. Puede ver inventario de clientes pero no modificarlo.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('sales_team.group_sale_manager')), (4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE MESA DE AYUDA -->
        <!-- ============================================ -->
        
        <!-- Rol: Mesa de Ayuda - Administrador -->
        <record id="role_helpdesk_manager" model="permission.role">
            <field name="name">Mesa de Ayuda - Administrador</field>
            <field name="description">Gestión completa de mesa de ayuda: órdenes de mantenimiento, cambios de componentes, inventario de clientes, dashboard de métricas y consulta de seriales. Acceso a mesa_ayuda_inventario.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_manager')), (4, ref('stock.group_stock_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Mesa de Ayuda - Técnico -->
        <record id="role_helpdesk_technician" model="permission.role">
            <field name="name">Mesa de Ayuda - Técnico</field>
            <field name="description">Consulta de inventario de clientes, creación y gestión de órdenes de mantenimiento, cambios de componentes y consulta de seriales. Acceso limitado a mesa_ayuda_inventario.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE LICENCIAS Y SUSCRIPCIONES -->
        <!-- ============================================ -->
        
        <!-- Rol: Administrador de Licencias -->
        <record id="role_licenses_manager" model="permission.role">
            <field name="name">Administrador de Licencias</field>
            <field name="description">Gestión completa de licencias: TRM, plantillas de licencias, asignaciones a clientes y equipos, suscripciones sin contabilización y control de vencimientos. Acceso a subscription_licenses y subscription_nocount.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('base.group_system'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager'))]"/>
        </record>

        <!-- Rol: Usuario de Licencias -->
        <record id="role_licenses_user" model="permission.role">
            <field name="name">Usuario de Licencias</field>
            <field name="description">Consulta de licencias, asignaciones y suscripciones. Puede crear asignaciones pero no gestionar TRM ni plantillas. Acceso limitado a subscription_licenses.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('base.group_system')), (4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE CALCULADORA DE COSTOS -->
        <!-- ============================================ -->
        
        <!-- Rol: Calculadora de Costos -->
        <record id="role_cost_calculator" model="permission.role">
            <field name="name">Calculadora de Costos</field>
            <field name="description">Acceso completo a la calculadora de costos: cálculo de costos de servicios, equipos, renting, APU de servicios, parámetros financieros y tasas de interés. Acceso a calculadora_costos.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES DE CONSULTA -->
        <!-- ============================================ -->
        
        <!-- Rol: Solo Consulta -->
        <record id="role_readonly_all" model="permission.role">
            <field name="name">Solo Consulta</field>
            <field name="description">Acceso de solo lectura a todos los módulos: inventario, compras, ventas, CRM, licencias, mesa de ayuda y calculadora de costos. No puede crear ni modificar registros.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_user')), (4, ref('purchase.group_purchase_user')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('product.group_product_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES ESPECIALIZADOS -->
        <!-- ============================================ -->
        
        <!-- Rol: Gestor de Productos -->
        <record id="role_product_manager" model="permission.role">
            <field name="name">Gestor de Productos</field>
            <field name="description">Gestión completa de productos: crear, modificar productos, productos compuestos, componentes, periféricos, complementos, rutas de stock y gestión masiva de rutas. Acceso a product_suppiles, mass_routes_manager y select_all_routes.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('product.group_product_manager')), (4, ref('stock.group_stock_user')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Gestor de Inventario de Clientes -->
        <record id="role_customer_inventory_manager" model="permission.role">
            <field name="name">Gestor de Inventario de Clientes</field>
            <field name="description">Gestión del inventario de clientes: asignación de seriales a contactos, consulta de inventario por cliente, inventario propio del cliente y productos compuestos en ubicaciones de clientes. Acceso a product_suppiles_partner.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_user')), (4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- ============================================ -->
        <!-- ROLES COMBINADOS -->
        <!-- ============================================ -->
        
        <!-- Rol: Compras e Inventario -->
        <record id="role_purchase_inventory" model="permission.role">
            <field name="name">Compras e Inventario</field>
            <field name="description">Acceso combinado a compras e inventario: gestionar órdenes de compra, recibir productos, gestionar inventario y productos. Ideal para personal de almacén y compras.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('purchase.group_purchase_manager')), (4, ref('purchase.group_purchase_user')), (4, ref('stock.group_stock_manager')), (4, ref('stock.group_stock_user')), (4, ref('product.group_product_manager'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Ventas e Inventario -->
        <record id="role_sales_inventory" model="permission.role">
            <field name="name">Ventas e Inventario</field>
            <field name="description">Acceso combinado a ventas e inventario: gestionar ventas, consultar inventario, verificar disponibilidad de productos y gestionar inventario de clientes. Ideal para personal de ventas.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('sales_team.group_sale_manager')), (4, ref('sales_team.group_sale_salesman')), (4, ref('stock.group_stock_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('stock.group_stock_manager')), (4, ref('purchase.group_purchase_manager')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Rol: Mesa de Ayuda e Inventario -->
        <record id="role_helpdesk_inventory" model="permission.role">
            <field name="name">Mesa de Ayuda e Inventario</field>
            <field name="description">Acceso combinado a mesa de ayuda e inventario: gestionar mantenimientos, consultar inventario de clientes, gestionar cambios de componentes y consultar productos. Ideal para técnicos de soporte.</field>
            <field name="active">True</field>
            <field name="group_ids" eval="[(4, ref('base.group_user')), (4, ref('stock.group_stock_manager')), (4, ref('stock.group_stock_user'))]"/>
            <field name="excluded_group_ids" eval="[(4, ref('purchase.group_purchase_manager')), (4, ref('sales_team.group_sale_manager')), (4, ref('base.group_system'))]"/>
        </record>
    </data>
</odoo>
