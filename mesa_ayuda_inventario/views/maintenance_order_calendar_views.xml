<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Vista de Calendario para Ordenes de Mantenimiento/Visitas -->
        <record id="view_maintenance_order_calendar" model="ir.ui.view">
            <field name="name">maintenance.order.calendar</field>
            <field name="model">maintenance.order</field>
            <field name="arch" type="xml">
                <calendar string="Visitas y Mantenimientos Programados" 
                         date_start="scheduled_date"
                         date_stop="deadline_date"
                         color="activity_type"
                         event_open_popup="true"
                         quick_create="false"
                         mode="month">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="activity_type"/>
                    <field name="technician_ids"/>
                    <field name="state"/>
                </calendar>
            </field>
        </record>

        <!-- Acción para Vista de Calendario -->
        <record id="action_maintenance_order_calendar" model="ir.actions.act_window">
            <field name="name">Calendario</field>
            <field name="res_model">maintenance.order</field>
            <field name="view_mode">calendar,list,form</field>
            <field name="view_id" ref="view_maintenance_order_calendar"/>
            <field name="domain">[('state', 'not in', ('cancelled', 'completed'))]</field>
            <field name="context">{
                'search_default_scheduled': 1,
                'search_default_in_progress': 1,
            }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No hay visitas programadas
                </p>
                <p>
                    Visualiza todas las visitas y mantenimientos programados en formato de calendario.
                    <br/>
                    <strong>Nota:</strong> Los técnicos pueden ver solo sus asignaciones usando el filtro o accediendo al calendario nativo de Odoo.
                </p>
            </field>
        </record>

    </data>
</odoo>

