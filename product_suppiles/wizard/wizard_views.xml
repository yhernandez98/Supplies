<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <record id="view_purchase_add_items_wizard_form" model="ir.ui.view">
    <field name="name">purchase.add.items.wizard.form</field>
    <field name="model">purchase.add.items.wizard</field>
    <field name="arch" type="xml">
      <form string="Agregar Componentes / Periféricos / Complementos">
        <group>
          <field name="order_line_id" invisible="1"/>
          <field name="product_tmpl_id" readonly="1"/>
        </group>
        <notebook>
          <page string="Resumen del producto">
            <group string="Componentes definidos">
              <field name="preview_product_component_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
            <group string="Periféricos definidos">
              <field name="preview_product_peripheral_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
            <group string="Complementos definidos">
              <field name="preview_product_complement_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
          </page>

          <page string="Acumulado en esta compra">
            <group string="Componentes ya agregados">
              <field name="preview_buffer_component_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
            <group string="Periféricos ya agregados">
              <field name="preview_buffer_peripheral_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
            <group string="Complementos ya agregados">
              <field name="preview_buffer_complement_lines" nolabel="1">
                <list>
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                </list>
              </field>
            </group>
          </page>

          <page string="Agregar / Editar">
            <group string="Componentes">
              <field name="component_lines" context="{'default_item_type': 'component'}" nolabel="1">
                <list editable="bottom">
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                  <field name="item_type" column_invisible="True"/>
                </list>
              </field>
            </group>
            <group string="Periféricos">
              <field name="peripheral_lines" context="{'default_item_type': 'peripheral'}" nolabel="1">
                <list editable="bottom">
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                  <field name="item_type" column_invisible="True"/>
                </list>
              </field>
            </group>
            <group string="Complementos">
              <field name="complement_lines" context="{'default_item_type': 'complement'}" nolabel="1">
                <list editable="bottom">
                  <field name="product_id" force_save="True"/>
                  <field name="quantity" force_save="True"/>
                  <field name="uom_id" force_save="True"/>
                  <field name="item_type" column_invisible="True"/>
                </list>
              </field>
            </group>
          </page>
        </notebook>
        <footer>
          <button string="Confirmar" type="object" name="action_confirm" class="btn-primary"/>
          <button string="Cancelar" special="cancel" class="btn-secondary"/>
        </footer>
      </form>
    </field>
  </record>



  <!-- Acción del wizard (usada también por el botón en líneas) -->
  <record id="action_sale_renting_apply_wizard" model="ir.actions.act_window">
    <field name="name">Aplicar Renting</field>
    <field name="res_model">sale.renting.apply.wizard</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
  </record>

  <record id="view_sale_renting_apply_wizard_form" model="ir.ui.view">
    <field name="name">sale.renting.apply.wizard.form</field>
    <field name="model">sale.renting.apply.wizard</field>
    <field name="arch" type="xml">
      <form string="Aplicar Renting a Producto Objetivo">
        <group>
          <field name="order_id" invisible="1"/>
          <field name="order_line_id" invisible="1"/>
          <field name="renting_src_tmpl_id" string="Producto Renting" force_save="True" readonly="1"/>
          <field name="applies_to_tmpl_id" string="Producto Objetivo"  force_save="True" required="1"/>
        </group>
        <footer>
          <button string="Confirmar" type="object" name="action_confirm" class="btn-primary"/>
          <button string="Cancelar" special="cancel" class="btn-secondary"/>
        </footer>
      </form>
    </field>
  </record>

</odoo>
